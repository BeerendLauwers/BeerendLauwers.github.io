<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Using Selenium IDE to generate TestNG tests and run them on BrowserStack via a Jenkins Maven job</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../css/custom.css" />
        <link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css">
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-64277210-1', 'auto');
          ga('send', 'pageview');
        </script>
    </head>
    <body>
        <div class="page-wrap">
            <h1>Using Selenium IDE to generate TestNG tests and run them on BrowserStack via a Jenkins Maven job</h1>
<p class="author">By <a href="http://beerendlauwers.be/">Beerend Lauwers</a></p>

<p>It’s amazing how little professional documentation there is available for Selenium integration, especially Selenium IDE.</p>
<p>I’m going to assume that you already have experience with Selenium IDE, TestNG, BrowserStack and Jenkins.</p>
<h2 id="selenium-ide-generate-testng-tests">Selenium IDE: Generate TestNG tests</h2>
<h3 id="what-is-it">What is it</h3>
<p>Selenium IDE is a Firefox plugin. There’s also <a href="https://github.com/SeleniumBuilder/se-builder">Selenium Builder</a>, which will probably be used in the future. I’m still using Selenium IDE for the moment.</p>
<h3 id="generating-testng-test-files">Generating TestNG test files</h3>
<p>Open up Selenium IDE in Firefox and do the following:</p>
<div class="image small">
<div class="figure">
<img src="../images/selenium/testng.png" alt="Exporting to TestNG with Selenium IDE" />
<p class="caption">Exporting to TestNG with Selenium IDE</p>
</div>
</div>
<h2 id="testng">TestNG</h2>
<h3 id="what-is-it-1">What is it</h3>
<p>TestNG is a Java-based test framework. It seemed a pretty sensible one, so I just picked it.</p>
<h2 id="maven">Maven</h2>
<h3 id="what-is-it-2">What is it</h3>
<p>Maven is a build manager for Java projects. Jenkins has built-in support for Maven jobs, and it’s less complex than an Ant script.</p>
<h2 id="creating-a-java-project-and-rigging-it-up-with-testng-tests">Creating a Java project and rigging it up with TestNG tests</h2>
<p><a href="http://www.guru99.com/maven-jenkins-with-selenium-complete-tutorial.html">This blog post</a> explains it quite well, so follow that first.</p>
<p>If it’s down, here’s a mirror: <a href="../images/selenium/Maven%20&amp;%20Jenkins%20with%20Selenium_%20Complete%20Tutorial.html">Mirror</a>.</p>
<h3 id="interfacing-with-browserstack">Interfacing with BrowserStack</h3>
<p>The files generated by Selenium IDE assume a local Selenium instance, but we want to test with BrowserStack.</p>
<p>In each test, you’ll want to add the following import statements:</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">import java.net.URL;</span>
<span class="kw">import org.openqa.selenium.remote.DesiredCapabilities;</span>
<span class="kw">import org.openqa.selenium.remote.RemoteWebDriver;</span></code></pre></div>
<p>In the <code>setUp()</code> method, you will want to replace the lines</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">driver = <span class="kw">new</span> <span class="fu">FirefoxDriver</span>();
baseUrl = <span class="st">&quot;YOUR_URL&quot;</span>;</code></pre></div>
<p>with</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">DesiredCapabilities capability = <span class="kw">new</span> <span class="fu">DesiredCapabilities</span>();
capability.<span class="fu">setPlatform</span>(Platform.<span class="fu">WINDOWS</span>);
capability.<span class="fu">setCapability</span>(<span class="st">&quot;build&quot;</span>, <span class="st">&quot;TestNG - Sample&quot;</span>);
driver = <span class="kw">new</span> <span class="fu">RemoteWebDriver</span>(
  <span class="kw">new</span> URL(<span class="st">&quot;http://BROWSERSTACK_USERNAME:BROWSERSTACK_PASSWORD@hub.browserstack.com/wd/hub&quot;</span>),
  capability
);

baseUrl = <span class="st">&quot;YOUR_URL&quot;</span>;</code></pre></div>
<p>In the runner method (usually named the same as your class), you’ll want to add</p>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java">driver.<span class="fu">get</span>(baseUrl);</code></pre></div>
<p>in the appropriate location (at the start, after any <code>String</code> declarations).</p>
<h2 id="setting-up-a-maven-project-with-the-testng-project">Setting up a Maven project with the TestNG project</h2>
<p>The <a href="http://www.guru99.com/maven-jenkins-with-selenium-complete-tutorial.html">aforementioned blog post</a> also covers this.</p>
<h2 id="accessing-the-testng-report-via-jenkins">Accessing the TestNG report via Jenkins</h2>
<p>You’ll need the <a href="https://wiki.jenkins-ci.org/display/JENKINS/HTML+Publisher+Plugin">HTML Publisher Plugin</a> for this. After installing it, go to your job configuration page and add it as a post-build action:</p>
<div class="image small">
<div class="figure">
<img src="../images/selenium/post-build-action.png" alt="Selecting Publish HTML reports as a post-build action." />
<p class="caption">Selecting “Publish HTML reports” as a post-build action.</p>
</div>
</div>
<p>Click the “Add” button to add a report. You’ll see the following fields:</p>
<div class="image small">
<div class="figure">
<img src="../images/selenium/publish-html-report.png" alt="The available fields for publishing a report." />
<p class="caption">The available fields for publishing a report.</p>
</div>
</div>
<ul>
<li><strong>HTML directory to archive</strong>: This is a path relative to your workspace. In my case, I used <code>surefire-reports</code> as the reporter. To find out this directory, I SSHed to the Jenkins server and rummaged around until I found it:
<div class="image small">
<img src="../images/selenium/jenkins-workspace.png" alt="Discovering where the Jenkins workspace was at." />
</div></li>
<li><p><strong>Index page[s]</strong>: The page that will be served as the index.</p></li>
<li><p><strong>Report title</strong>: The title of the report as it will be shown in Jenkins.</p></li>
</ul>
<p>To view the checkboxes, you need to press the “Publishing options…” button (not visible in the screenshot).</p>
<ul>
<li><p><strong>Keep past HTML reports</strong>: You will definitely want this. Otherwise, only the latest report will always be kept.</p></li>
<li><p><strong>Always link to last build</strong>: There’s also a link to a build on the job level. I think this just redirects that link to the latest build.</p></li>
<li><p><strong>Allow missing report</strong>: Leaving this unchecked makes the build fail if the publishing process fails.</p></li>
</ul>
<p>When a build finishes, you’ll now get a link to the report on the left-hand side:</p>
<div class="image small">
<div class="figure">
<img src="../images/selenium/testng-link.png" alt="The newly-available report." />
<p class="caption">The newly-available report.</p>
</div>
</div>
<h2 id="done">Done!</h2>
<p>Really, the only special bit here is that we’re now running everything via BrowserStack. BrowerStack currently doesn’t have a complete tutorial for proper Jenkins integration, so I thought I’d write this down to get a starting document going.</p>

<footer>
  &copy; March 22, 2016 Beerend Lauwers &lt;beerendlauwers@gmail.com&gt;
</footer>

        </div>
        <div class="page-wrap" id="footer">
            Site automatically generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
